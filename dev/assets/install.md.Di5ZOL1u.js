import{_ as i,o as e,c as a,aA as t}from"./chunks/framework.BW7SO86s.js";const c=JSON.parse('{"title":"Build Options","description":"","frontmatter":{},"headers":[],"relativePath":"install.md","filePath":"install.md","lastUpdated":null}'),n={name:"install.md"};function l(h,s,o,p,d,r){return e(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="Build-Options" tabindex="-1">Build Options <a class="header-anchor" href="#Build-Options" aria-label="Permalink to &quot;Build Options {#Build-Options}&quot;">​</a></h1><p>To make customization of the build options easier we have the <code>LegatePreferences.jl</code> package to generate the <code>LocalPreferences.toml</code> which is read by the build script to determine which build option to use. LegatePreferences.jl will also enforce that Julia is restarted for changes to take effect.</p><h2 id="Default-Build-jlls" tabindex="-1">Default Build (jlls) <a class="header-anchor" href="#Default-Build-jlls" aria-label="Permalink to &quot;Default Build (jlls) {#Default-Build-jlls}&quot;">​</a></h2><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add Legate</span></span></code></pre></div><p>If you previously used a custom build or conda build and would like to revert back to using prebuilt JLLs, run the following command in the directory containing the Project.toml of your environment.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LegatePreferences; LegatePreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">use_jll_binary</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p><code>LegatePreferences</code> is a separate module so that it can be used to configure the build settings before <code>Legate.jl</code> is added to your environment. To install it separately run</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> add LegatePreferences</span></span></code></pre></div><h2 id="Developer-mode" tabindex="-1">Developer mode <a class="header-anchor" href="#Developer-mode" aria-label="Permalink to &quot;Developer mode {#Developer-mode}&quot;">​</a></h2><div class="tip custom-block github-alert"><p class="custom-block-title">This gives the most flexibility in installs. It is meant for developing on Legate.jl.</p><p></p></div><p>We support using a custom install version of Legate. See <a href="https://docs.nvidia.com/legate/latest/installation.html" target="_blank" rel="noreferrer">https://docs.nvidia.com/legate/latest/installation.html</a> for details about different install configurations, or building Legate from source.</p><p>We require that you have a g++ capable compiler of C++ 20, and a recent version CMake &gt;= 3.26.</p><p>To use developer mode,</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LegatePreferences; LegatePreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">use_developer_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(; use_legate_jll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, legate_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">nothing</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>By default <code>use_legate_jll</code> will be set to true. However, you can set a custom branch and/or use a custom path of legate. By setting <code>use_legate_jll=false</code>, you can set <code>legate_path</code> to your custom install.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LegatePreferences; LegatePreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">use_developer_mode</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(;use_legate_jll</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, legate_path</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/path/to/legate/root&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><div class="warning custom-block github-alert"><p class="custom-block-title">Right now, building Legate with CUDA support requires both the CUDA driver library (libcuda.so) and the CUDA runtime library (libcudart.so) to be discoverable on the system library path. Automatic detection and use of CUDA versions provided via JLL packages is not yet implemented and remains a TODO.</p><p></p><p>In <code>deps/cpp_wrapper.log</code>, you will a CUDAToolkit version that is not self-contained with our JLL distributions.</p></div><h2 id="Link-Against-Existing-Conda-Environment" tabindex="-1">Link Against Existing Conda Environment <a class="header-anchor" href="#Link-Against-Existing-Conda-Environment" aria-label="Permalink to &quot;Link Against Existing Conda Environment {#Link-Against-Existing-Conda-Environment}&quot;">​</a></h2><div class="warning custom-block github-alert"><p class="custom-block-title">This feature is not passing our CI currently. Please use with caution. We are failing to currently match proper versions of .so libraries together. Our hope is to get this functional for users already using Legate within conda.</p><p></p></div><p>Note, you need conda &gt;= 24.1 to install the conda package. More installation details are found <a href="https://docs.nvidia.com/legate/latest/installation.html" target="_blank" rel="noreferrer">here</a>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># with a new environment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myenv</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> legate</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># into an existing environment</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> conda-forge</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> legate</span></span></code></pre></div><p>Once you have the conda package installed, you can activate here.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">conda</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> activate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [conda-env-with-legate]</span></span></code></pre></div><p>To update <code>LocalPreferences.toml</code> so that a local conda environment is used as the binary provider for cupynumeric run the following command. <code>conda_env</code> should be the absolute path to the conda environment (e.g., the value of CONDA_PREFIX when your environment is active). For example, this path is: <code>/home/JuliaLegate/.conda/envs/legate-gpu</code>.</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> LegatePreferences; LegatePreferences</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">use_conda</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;conda-env-with-legate&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Pkg</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">build</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div>`,25)])])}const g=i(n,[["render",l]]);export{c as __pageData,g as default};
